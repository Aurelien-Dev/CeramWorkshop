@using Microsoft.AspNetCore.Components.Web
@using Domain.Models

@namespace Common.Helpers.RazorComponent.ProductControls

<div class="carousel-item @(IsFirstElement? "active":"")">
    <div class="bg-img-cover d-flex justify-content-center p-3 rounded-right" style="background-image: url('@Url'); height:500px;">
        @if (ShowIcons)
        {
            <button class="btn btn-danger btn-icon m-1" type="button" @onclick=OnDeleteImageEvent>
                <i data-feather="trash-2"></i>
            </button>
            <button class="btn btn-green btn-icon m-1" type="button" @onclick=OnEditImageEvent>
                <i data-feather="edit-2"></i>
            </button>
        }
    </div>
    <div class="p-1 mb-3">
        <strong>Commentaire:</strong>
        <br>
        @Image.Comment
    </div>
</div>

@code {
    [Parameter] public ImageInstruction Image { get; set; }
    [Parameter] public bool IsFirstElement { get; set; }
    [Parameter] public bool ShowIcons { get; set; } = false;
    [Parameter] public EventCallback<int> OnDeleteImageCallback { get; set; }
    [Parameter] public EventCallback<int> OnEditImageCallback { get; set; }

    public string Url { get => Image.Url; }
    
    public async Task OnDeleteImageEvent()
    {
        await OnDeleteImageCallback.InvokeAsync(Image.Id);
    }

    public async Task OnEditImageEvent()
    {
        await OnEditImageCallback.InvokeAsync(Image.Id);
    }
}