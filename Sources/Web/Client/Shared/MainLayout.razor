@using Client.Utils
@using Client.Services
@using Client.Pages.Authentification

@inherits CustomLayoutComponentBase

<PageTitle>Ceram-Workshop</PageTitle>

<MudThemeProvider Theme="MyCustomTheme" />
<MudDialogProvider />
<MudSnackbarProvider />


<AuthorizeView>
    <Authorized>
         
        <MudLayout>

            <MudAppBar>
                <MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Inherit" Edge="Edge.Start" OnClick="@((e) => DrawerToggle())" />
                <MudButton Href="/" Variant="Variant.Filled" DisableElevation="true" Color="Color.Primary" Style="text-transform:none">@CurrentSession.Workshop?.Name</MudButton>
                <MudIconButton Icon="@Icons.Material.Outlined.Add" Color="Color.Inherit" OnClick="NewProduct" />

                <MudSpacer />

                <MudMenu Icon="@Icons.Custom.Uncategorized.Radioactive" Color="Color.Dark">
                    <ActivatorContent>
                        <MudFab EndIcon="@Icons.Material.Filled.Person" Color="Color.Primary" Size="Size.Small" />
                    </ActivatorContent>
                    <ChildContent>
                        <MudMenuItem Href="/Profil">@Localizer["MenuItem_Profile"]</MudMenuItem>
                        <MudMenuItem Href="/Logout">@Localizer["MenuItem_SignOut"]</MudMenuItem>
                    </ChildContent>
                </MudMenu>
            </MudAppBar>

            <MudDrawer @bind-Open="@_drawerOpen" ClipMode="DrawerClipMode.Always">
                <Sidebar />
            </MudDrawer>


            <MudMainContent>
                <MudContainer MaxWidth="MaxWidth.ExtraExtraLarge">
                    @Body
                    <Footer />
                </MudContainer>
            </MudMainContent>

            <MudScrollToTop>
                <MudFab Color="Color.Tertiary" StartIcon="@Icons.Material.Filled.ArrowCircleUp" />
            </MudScrollToTop>

        </MudLayout>

    </Authorized>
</AuthorizeView>


<AuthorizeView>
    <NotAuthorized>

        <MudLayout>
            <MudMainContent>
                <MudContainer MaxWidth="MaxWidth.Small">
                    <Login />
                    <Footer />
                </MudContainer>
            </MudMainContent>
            <MudScrollToTop>
                <MudFab Color="Color.Tertiary" StartIcon="@Icons.Material.Filled.ArrowCircleUp" />
            </MudScrollToTop>
        </MudLayout>

    </NotAuthorized>
</AuthorizeView>
